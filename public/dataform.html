<!DOCTYPE html>
    <html>
        <head>
        <link rel= "StyleSheet" href="css/style.css">
        </head>
            <body>
            <h1 class = "MR.COD">MR.COD Website</h1>
                <form action="/api/runs" method="POST">

    
                    <h2>Team Information</h2>
                    

                    <!-- <label>Team Name:</label> 
                    <input type="text" name="team_name" value="" id="1a" required='required'/>

                    <label>Team Number:</label> 
                    <input type="text" name="team_number" value="" id="1b" required='required'/> -->

                    <select name="matches" id="matches" onchange="change_myselect(this.value)">
                        <option value="select">Select</option>
                    </select>
                    <select name="team" id="team" required="required" onchange="test(this.value)"></select>

                    <script>
         
                        fetch('./api/schedule')
                           .then((res) => {
                              return res.text();
                           })
                           .then((data) => {
                              matches = JSON.parse(data);
                              matches.forEach((item, index, arr) => {
                                 document.getElementById('matches').innerHTML += `<option value="${index}">Match #${index+1}</option>`
                              });
                           })
                        
                        function change_myselect(sel) {
                           fetch('./api/schedule')
                           .then((res) => {
                              return res.text();
                           })
                           .then((data) => {
                              if(sel !== "select"){
                                 matches = JSON.parse(data);
                                 // document.getElementById('p1').innerHTML = sel;
                                 document.getElementById('team').innerHTML = 
                                    `<option value='{"name": "${matches[parseInt(sel)].blue_1.name}", "number": "${matches[parseInt(sel)].blue_1.number}"}'>${matches[sel].blue_1.name} - ${matches[sel].blue_1.number}</option>` + 
                                    `<option value='{"name": "${matches[parseInt(sel)].blue_2.name}", "number": "${matches[parseInt(sel)].blue_2.number}"}'>${matches[sel].blue_2.name} - ${matches[sel].blue_2.number}</option>` +
                                    `<option value='{"name": "${matches[parseInt(sel)].red_1.name}", "number": "${matches[parseInt(sel)].red_1.number}"}'>${matches[sel].red_1.name} - ${matches[sel].red_1.number}</option>` +
                                    `<option value='{"name": "${matches[parseInt(sel)].red_2.name}", "number": "${matches[parseInt(sel)].red_2.number}"}'>${matches[sel].red_2.name} - ${matches[sel].red_2.number}</option>`;
                              } else {
                                 document.getElementById('team_number').innerHTML = "";
                              }
                           })
                        }

                        function test(sel) {
                           console.log(sel);
                        }
                     </script>


                    <h2>Autonomous Mode</h2>
                    

                    <label for="ground_auto">Cones placed onto ground junctions:</label>
                    <select name="ground_auto" id="ground_auto" style="font-size: 18px;">
                        <option value="N/A">N/A</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                      </select>

                      <br></br>

                      <label for="low_auto">Cones placed onto low junctions:</label>
                      <select name="low_auto" id="low_auto" style="font-size: 18px;">
                          <option value="N/A">N/A</option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                          <option value="7">7</option>
                          <option value="8">8</option>
                        </select>
                        
                        <br></br>

                        <label for="medium_auto">Cones placed onto medium junctions:</label>
                        <select name="medium_auto" id="medium_auto" style="font-size: 18px;">
                            <option value="N/A">N/A</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                          </select>

                          <br></br>

                          <label for="high_auto">Cones placed onto high junctions:</label>
                          <select name="high_auto" id="high_auto" style="font-size: 18px;">
                              <option value="N/A">N/A</option>
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                            </select>

                            <p>Parked in alliance substation or terminal?</p>
                            <input type="radio" name="auto_park" value="yes" id="8a">
                            <label>Yes</label>
                            <input type="radio" name="auto_park" value="no" id="8b" checked="true">
                            <label>No</label>

                            <p>Parked in correct signal zone?</p>
                            <input type="radio" name="auto_signal" value="yes" id="8a">
                            <label>Yes</label>
                            <input type="radio" name="auto_signal" value="no" id="8b" checked="true">
                            <label>No</label>

                            https://www.youtube.com/watch?v=FLyHblqbPnE (At 3:15: What does this exactly mean?)


                    <h2>Driver Controlled</h2>


                    <label for="deliver_shared">How many game elements did they <br> place on the shared shipping hub<br> in driver control mode?<br></label>
                    <input type="number" name="deliver_shared" id="deliver_shared" value="0">

                    <p style="margin-bottom: 5px;">How many game elements did they <br> place on the alliance shipping hub <br> in driver control mode?</p>
                    <label for="alliance_top">Top:</label>
                    <input type="number" name="alliance_top" id="alliance_top" value="0" min="0" style="margin-bottom: 5px;">
                    <label for="alliance_middle"><br> Middle:</label>
                    <input type="number" name="alliance_middle" id="alliance_middle" value="0" min="0" style="margin-bottom: 5px;">
                    <label for="alliance_bottom"><br> Bottom:</label>
                    <input type="number" name="alliance_bottom" id="alliance_bottom" value="0" min="0">


                    <!-- <p>Did they deliver an element in the alliance shipping hub?</p>
                    <input type="radio" name="deliver_alliance" value="yes" id="7a">
                    <label>Yes</label>
                    <input type="radio" name="deliver_alliance" value="no" id="7b" checked="true">
                    <label>No</label>

                    <p>Did they deliver an element in the shared shipping hub?</p>
                    <input type="radio" name="deliver_shared" value="yes" id="">
                    <label>Yes</label>
                    <input type="radio" name="deliver_shared" value="no" id="" checked="true">
                    <label>No</label> -->

                    <p>Did they go over the barrier?</p>
                    <input type="radio" name="barrier" value="yes" id="8a">
                    <label>Yes</label>
                    <input type="radio" name="barrier" value="no" id="8b" checked="true">
                    <label>No</label>


                    <h2>Endgame</h2>


                    <label for="ducks">Ducks Delivered:</label>
                    <select name="ducks" id="ducks" style="font-size: 18px;">
                        <option value="N/A">N/A</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                      </select>

                    <p>Did they cap the alliance shipping hub with TSE?</p>
                    <input type="radio" name="tse" value="yes" id="12a">
                    <label>Yes</label>
                    <input type="radio" name="tse" value="no" id="12b" checked="true">
                    <label>No</label>
                    
                    <p>Did they park in the alliance storage unit?</p>
                    <input type="radio" name="alliance_park_end" value="fully" id="10a">
                    <label>Fully</label>
                    <input type="radio" name="alliance_park_end" value="partially" id="10b">
                    <label>Partially</label>
                    <input type="radio" name="alliance_park_end" value="no" id="10c" checked="true">
                    <label >No</label>

                    <p>Did they park in the warehouse?</p>
                    <input type="radio" name="warehouse_park_end" value="fully" id="11a">
                    <label>Fully</label>
                    <input type="radio" name="warehouse_park_end" value="partially" id="11b">
                    <label>Partially</label>
                    <input type="radio" name="warehouse_park_end" value="no" id="11c" checked="true">
                    <label >No</label>

                    <h2 style="margin-bottom: 0px;">Penalty Points</h2>
                    <p></p>
                    <input type="number" name="penalties" value="0" min="0" max="120" style="font-size: 20px;"/>
                    <p></p>

                    <h2>Notes</h2>
                    <textarea rows="9" cols="50" name="notes" id=""></textarea>

                    <p></p>
                    <input type="submit" value="Submit Run">

                </form>
                <br>
                <a href ="/api/runs">Visit API</a>
                </br>
            </body>
    </html>