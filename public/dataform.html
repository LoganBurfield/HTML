<!DOCTYPE html>
    <html>
        <head>
        <link rel= "StyleSheet" href="css/dataform.css">
        </head>
            <body>
                <form action="/api/runs" method="POST">

    
                    <h2>Team Information</h2>
                    

                    <!-- <label>Team Name:</label> 
                    <input type="text" name="team_name" value="" id="1a" required='required'/>

                    <label>Team Number:</label> 
                    <input type="text" name="team_number" value="" id="1b" required='required'/> -->

                    <select name="matches" id="matches" onchange="change_myselect(this.value)">
                        <option value="select">Select</option>
                    </select>
                    <select name="team" id="team" required="required" onchange="test(this.value)"></select>

                    <script>
         
                        fetch('./api/schedule')
                           .then((res) => {
                              return res.text();
                           })
                           .then((data) => {
                              matches = JSON.parse(data);
                              matches.forEach((item, index, arr) => {
                                 document.getElementById('matches').innerHTML += `<option value="${index}">Match #${index+1}</option>`
                              });
                           })
                        
                        function change_myselect(sel) {
                           fetch('./api/schedule')
                           .then((res) => {
                              return res.text();
                           })
                           .then((data) => {
                              if(sel !== "select"){
                                 matches = JSON.parse(data);
                                 // document.getElementById('p1').innerHTML = sel;
                                 document.getElementById('team').innerHTML = 
                                    `<option value='{"name": "${matches[parseInt(sel)].blue_1.name}", "number": "${matches[parseInt(sel)].blue_1.number}"}'>${matches[sel].blue_1.name} - ${matches[sel].blue_1.number}</option>` + 
                                    `<option value='{"name": "${matches[parseInt(sel)].blue_2.name}", "number": "${matches[parseInt(sel)].blue_2.number}"}'>${matches[sel].blue_2.name} - ${matches[sel].blue_2.number}</option>` +
                                    `<option value='{"name": "${matches[parseInt(sel)].red_1.name}", "number": "${matches[parseInt(sel)].red_1.number}"}'>${matches[sel].red_1.name} - ${matches[sel].red_1.number}</option>` +
                                    `<option value='{"name": "${matches[parseInt(sel)].red_2.name}", "number": "${matches[parseInt(sel)].red_2.number}"}'>${matches[sel].red_2.name} - ${matches[sel].red_2.number}</option>`;
                              } else {
                                 document.getElementById('team_number').innerHTML = "";
                              }
                           })
                        }

                        function test(sel) {
                           console.log(sel);
                        }
                     </script>


                    <h2>Autonomous Mode</h2>
                    

                    <label for="immediate_stack">Did they immediately go for the cone stack?</label>
                    <input type="radio" name="immediate_stack" value="yes" id="immediate_stack_1">
                    <label>Yes</label>
                    <input type="radio" name="immediate_stack" value="no" id="immediate_stack_2" checked="true">
                    <label>No</label>

                    <br></br>

                    <label for="ground_auto">Cones placed onto ground junctions:</label>
                    <select name="ground_auto" id="ground_auto" style="font-size: 18px;">
                        <option value="N/A">N/A</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                      </select>

                      <br></br>

                      <label for="low_auto">Cones placed onto low junctions:</label>
                      <select name="low_auto" id="low_auto" style="font-size: 18px;">
                          <option value="N/A">N/A</option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                          <option value="7">7</option>
                          <option value="8">8</option>
                        </select>
                        
                        <br></br>

                        <label for="medium_auto">Cones placed onto medium junctions:</label>
                        <select name="medium_auto" id="medium_auto" style="font-size: 18px;">
                            <option value="N/A">N/A</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                          </select>

                          <br></br>

                          <label for="high_auto">Cones placed onto high junctions:</label>
                          <select name="high_auto" id="high_auto" style="font-size: 18px;">
                              <option value="N/A">N/A</option>
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                           </select>
                           <br></br>
                           <label for="auto_park">Parked in alliance substation or terminal?</label>
                           <input type="radio" name="auto_park" value="yes" id="auto_park_1">
                           <label>Yes</label>
                           <input type="radio" name="auto_park" value="no" id="auto_park_2" checked="true">
                           <label>No</label>
                            
                           <p>Parked in correct signal zone? â¬‡</p>
                           <input type="radio" name="auto_signal" value="yes_with_custom_sleeve" id="auto_signal_1">
                           <label>Yes, with custom sleeve</label>
                           <input type="radio" name="auto_signal" value="yes_with_default_sleeve" id="8a">
                           <label>Yes, with default sleeve</label>
                           <input type="radio" name="auto_signal" value="no" id="8b" checked="true">
                           <label>No</label>


                    <h2>Driver Controlled</h2>


                    <label for="cone_terminal">Cones placed inside terminal:</label>
                    <select name="cone_terminal" id="cone_terminal" style="font-size: 18px;">
                        <option value="N/A">N/A</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                      </select>

                      <br></br>

                      <label for="ground_driver">Cones placed onto ground junctions:</label>
                      <select name="ground_driver" id="ground_driver" style="font-size: 18px;">
                          <option value="N/A">N/A</option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                          <option value="7">7</option>
                          <option value="8">8</option>
                          <option value="9">9</option>
                        </select>
  
                        <br></br>
  
                        <label for="low_driver">Cones placed onto low junctions:</label>
                        <select name="low_driver" id="low_driver" style="font-size: 18px;">
                            <option value="N/A">N/A</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                          </select>
                          
                          <br></br>
  
                          <label for="medium_driver">Cones placed onto medium junctions:</label>
                          <select name="medium_driver" id="medium_driver" style="font-size: 18px;">
                              <option value="N/A">N/A</option>
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                            </select>
  
                            <br></br>
  
                            <label for="high_driver">Cones placed onto high junctions:</label>
                            <select name="high_driver" id="high_driver" style="font-size: 18px;">
                                <option value="N/A">N/A</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                              </select>


                              <h2>Endgame</h2>
          
          
                              <label for="ownership">Did the team go for ownership?</label>
                              <input type="radio" name="ownership" value="yes" id="ownership_1">
                              <label>Yes</label>
                              <input type="radio" name="ownership" value="no" id="ownership_2" checked="true">
                              <label>No</label>

                              <br></br>
                              
                              <label for="owned_junctions">Did the team end with a circuit?</label>
                                 <input type="radio" name="owned_junctions" value="yes" id="owned_junctions_1">
                                 <label>Yes</label>
                                 <input type="radio" name="owned_junctions" value="no" id="owned_junctions_2" checked="true">
                                 <label>No</label>

                                 <br></br>

                                 <label for="endgame_park">Parked in alliance terminal?</label>
                                 <input type="radio" name="endgame_park" value="yes" id="endgame_park_1">
                                 <label>Yes</label>
                                 <input type="radio" name="endgame_park" value="no" id="endgame_park_2" checked="true">
                                 <label>No</label>

                    <h2 style="margin-bottom: 0px;">Penalty Points</h2>
                    <p></p>
                    <input type="number" id="penalties" name="penalties" value="0" min="0" max="120" style="font-size: 20px;"/>
                    <p></p>

                    <h2>Notes</h2>
                    <textarea rows="9" cols="50" name="notes" id="notes"></textarea>

                    <p></p>
                    <input type="submit" id="submit" value="Submit Run">

                </form>
                <br>
                <a href ="/api/runs">Visit API</a>
                </br>
            </body>
    </html>